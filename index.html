<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>openerpdist by noteed</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>openerpdist</h1>
        <p>Build the OpenERP framework and addons as nice tarballs</p>

        <p class="view"><a href="https://github.com/noteed/openerpdist">View the Project on GitHub <small>noteed/openerpdist</small></a></p>


        <ul>
          <li><a href="https://github.com/noteed/openerpdist/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/noteed/openerpdist/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/noteed/openerpdist">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="openerpdist---packaging-and-distributing-openerp" class="anchor" href="#openerpdist---packaging-and-distributing-openerp"><span class="octicon octicon-link"></span></a>openerpdist - Packaging and distributing OpenERP</h1>

<p><code>openerpdist</code> builds the OpenERP framework and addons as nice tarballs, ready
to be uploaded to pypi with minimal changes from upstream sources.</p>

<p>This project is unsupported by OpenERP s.a.</p>

<p>Please note that even if <code>openerpdist</code> itself uses a 3-clause BSD license, the
resulting packages remain under the AGPL license.</p>

<h2>
<a name="details" class="anchor" href="#details"><span class="octicon octicon-link"></span></a>Details</h2>

<p><code>openerpdist</code> builds packages ready to be consumed by the Python
infrastructure. In particular, it uses the regular <code>setup.py</code> files (using
<code>setuptools</code>), and the resulting tarballs are installable using e.g. <code>pip</code>.</p>

<p>One possible usage is to generate the desired packages and make them available
through a web server with an HTML listing (e.g. Nginx with <code>autoindex on</code>).
Packages can then be installed for instance in a new virtual env:</p>

<pre><code>&gt; virtualenv2 oe-env
&gt; oe-env/bin/pip install openerp-sale \
    --no-index \
    --find-links http://localhost/tarballs
</code></pre>

<p>or alternatively you can edit <a href="http://www.pip-installer.org/en/latest/configuration.html#configuration"><code>$HOME/.pip/pip.conf</code></a> file and append:</p>

<pre><code>[global]
find-links =
    http://localhost/tarballs
</code></pre>

<p>and then just use:</p>

<pre><code>&gt; virtualenv2 oe-env
&gt; oe-env/bin/pip install openerp-sale
</code></pre>

<p>Package dependencies are extracted from the <code>__openerp__.py</code> descriptor files
and listed in the generated <code>setup.py</code> files. This means that installing, say,
<code>openerp-sale</code> will install all its dependencies, including <code>openerp-core</code> (the
package for the server/framework).</p>

<h2>
<a name="install" class="anchor" href="#install"><span class="octicon octicon-link"></span></a>Install</h2>

<p>The development version can be installed by cloning the Git repository and using cabal:</p>

<pre><code>&gt; git clone git://github.com/noteed/openerpdist.git
&gt; cd openerpdist &amp;&amp; cabal install
</code></pre>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<p><code>openerpdist</code> is simple to use, either within the server source directory, or
within a specific addons, or from a directory containing multiple addons.</p>

<p>The command</p>

<pre><code>&gt; openerpdist patch
</code></pre>

<p>when run inside a serve source tree, will replace the existing <code>setup.py</code> and
<code>MANIFEST.in</code> files; for addons it will generate a <code>setup.py</code> file. Note that
it will first check with <code>bzr diff</code> if the directory (assumed to be a <code>.bzr</code>
repository) is clean.</p>

<p>Once done, you can simply execute</p>

<pre><code>&gt; openerpdist sdist
</code></pre>

<p>to generate some nice tarballs inside the newly created <code>dist</code> directories.</p>

<h2>
<a name="other-dependencies" class="anchor" href="#other-dependencies"><span class="octicon octicon-link"></span></a>Other dependencies</h2>

<p><code>openerpdist</code> lists the correct dependencies in the <code>setup.py</code> file. This is
enough for Python dependencies. But in addition, some of those dependencies,
and thus indirectly the packaged OpenERP libraries, need libraries and
programs to be installed with your operating system facilities.</p>

<p>On Ubuntu 12.04 those additional dependencies are:</p>

<p>(The list is incomplete for now.)</p>

<ul>
<li>libjpeg-dev</li>
<li>zlib1g-dev</li>
</ul><p>libjpeg-dev and zlib1g-dev are for JPEG and ZIP support in Pillow (<code>openerpdist</code>
sets Pillow instead of PIL).</p>

<h2>
<a name="limitations--todo" class="anchor" href="#limitations--todo"><span class="octicon octicon-link"></span></a>Limitations / TODO</h2>

<ul>
<li>Assume the directories where <code>openerpdist</code> is run are <code>bzr</code> repositories.</li>
<li>Does not generate a README file from the <code>__openerp__.py</code> descriptor.</li>
<li>The version used for each package is hard-coded to 7.0.1.</li>
<li>The listed dependencies for <code>openerp-core</code> are not correct (too many things,
required by some addons) while the ones for the addons don't list the
non-openerp dependencies.</li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/noteed">noteed</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>